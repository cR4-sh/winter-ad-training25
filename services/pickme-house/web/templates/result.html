<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>๐ pickme house ๐</title>
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body class="girly-page">
    <div class="container">
      <div class="girly-card">
        <div class="girly-header">
          <img src="/static/hellososity.png" alt="Hello Kitty" class="girly-header-image" />
          <div class="girly-header-content">
            <div class="girly-title">pickme house</div>
            <div class="girly-subtitle">โจ ะะตะทัะปััะฐั ะพะฟะตัะฐัะธะธ โจ</div>
          </div>
          <div style="margin-left:auto;text-align:right">
            <div style="margin-top:6px">
              <a class="btn ghost girly-ghost" href="/">๐ ะะปะฐะฒะฝะฐั ๐</a>
              <a class="btn ghost girly-ghost" href="/logout" style="margin-left:8px">๐พ ะัะนัะธ ๐พ</a>
            </div>
          </div>
        </div>

        <div id="result-panel" style="margin-top:12px" class="result-box panel-appear">
          {% if action == 'encrypt' %}
            <div><strong class="muted">๐ ะะฟะตัะฐัะธั:</strong> ะทะฐัะตะบัะตัะธะฒะฐะฝะธะต (ััะพะฒะตะฝั ัะตะบัะตัะฝะพััะธ {{ level }})</div>
            <div style="margin-top:8px"><strong class="muted">๐ ะะพะผะตัะพะบ ะทะฐะฟะธัะธ:</strong> <span class="record-id">{{ rec_id }}</span></div>
            <hr style="border:none;border-top:1px solid rgba(255,182,193,0.3);margin:10px 0" />
            {% if level == 3 %}
              <div><strong>๐ ะจะธััะพัะตะบััะธะบ:</strong> {{ ct }}</div>
              <div><strong>๐ฐ n:</strong> {{ n }}</div>
              <div><strong>๐ e:</strong> {{ e }}</div>
              <div><strong>๐ d:</strong> {{ d }}</div>
            {% elif level == 2 %}
              <div><strong>๐ ะจะธััะพัะตะบััะธะบ:</strong> {{ ct }}</div>
              <div><strong>๐ ะะปััะธะบ:</strong> {{ key }}</div>
              <div><strong>๐ฒ Nonce:</strong> {{ nonce }}</div>
            {% elif level == 1 %}
              <div><strong>๐ ะจะธััะพัะตะบััะธะบ:</strong> {{ ct }}</div>
              <div><strong>๐ซ ะขะพะบะตะฝ:</strong> {{ token }}</div>
              <div><strong>๐ ะะปััะธะบ:</strong> {{ key }}</div>
            {% endif %}

          {% elif action == 'decrypt' %}
            <div><strong class="muted">๐ ะะฟะตัะฐัะธั:</strong> ัะฐััะตะบัะตัะธะฒะฐะฝะธะต (ััะพะฒะตะฝั ัะตะบัะตัะฝะพััะธ {{ level }})</div>
            <hr style="border:none;border-top:1px solid rgba(255,182,193,0.3);margin:10px 0" />
            <pre>{{ m }}</pre>

          {% elif action == 'lookup' %}
            <div><strong class="muted">๐ ะะฟะตัะฐัะธั:</strong> ะฟะพะธัะบ ะฒ ะฑะดะตัะตัะบะต (ััะพะฒะตะฝั ัะตะบัะตัะฝะพััะธ {{ level }})</div>
            <hr style="border:none;border-top:1px solid rgba(255,182,193,0.3);margin:10px 0" />
            {% if row %}
              <div class="field-row"><div class="field-label">๐ ะะพะผะตัะพะบ ะทะฐะฟะธัะธ</div><div class="field-value">{{ row[0] }}</div></div>
              <div class="field-row"><div class="field-label">โฐ ะัะตะผะตัะบะพ (utc)</div><div class="field-value">{{ row[1] }}</div></div>
              {% if level == 1 %}
                <div class="field-row"><div class="field-label">๐ ะจะธััะพัะตะบััะธะบ</div><div class="field-value">{{ row[2] }}</div></div>
                <div class="field-row"><div class="field-label">๐ซ ะขะพะบะตะฝ</div><div class="field-value">{{ row[3] }}</div></div>
              {% elif level == 2 %}
                <div class="field-row"><div class="field-label">๐ ะจะธััะพัะตะบััะธะบ</div><div class="field-value">{{ row[2] }}</div></div>
                <div class="field-row"><div class="field-label">๐ฒ Nonce</div><div class="field-value">{{ row[3] }}</div></div>
              {% elif level == 3 %}
                <div class="field-row"><div class="field-label">๐ ะจะธััะพัะตะบััะธะบ</div><div class="field-value">{{ row[2] }}</div></div>
                <div class="field-row"><div class="field-label">๐ฐ n </div><div class="field-value">{{ row[3] }}</div></div>
                <div class="field-row"><div class="field-label">๐ e </div><div class="field-value">{{ row[4] }}</div></div>
              {% endif %}
            {% else %}
              <div class="muted">โ ะะตั ัะฐะบะพะน ะทะฐะฟะธัะธ :((</div>
            {% endif %}

          {% else %}
            <div class="muted">{{ m }}</div>
          {% endif %}
        </div>

        <div style="margin-top:24px"><a href="/" class="btn ghost girly-ghost">๐ ะะฐะทะฐะด</a></div>
      </div>
    </div>
    
    <div class="girly-decorations">
      <div class="floating-heart">๐</div>
      <div class="floating-cat">๐</div>
      <div class="floating-cake">๐ฐ</div>
      <div class="floating-star">โจ</div>
      <div class="floating-heart2">๐</div>
      <div class="floating-bow">๐</div>
      <div class="floating-unicorn">๐ฆ</div>
      <div class="floating-bear">๐งธ</div>
    </div>

    <script src="/static/app.js"></script>
    <script>
      (function(){
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initSparkles);
        } else {
          initSparkles();
        }
        
        function initSparkles() {
          if (!document.body) return;
          
          const emojis = ['๐', '๐', '๐', 'โจ', '๐ธ', '๐', '๐ฝ', '๐', '๐งธ', '๐', '๐', '๐', '๐'];
          const sparklesContainer = document.createElement('div');
          sparklesContainer.className = 'girly-sparkles';
          document.body.appendChild(sparklesContainer);

          let sparkleCount = 0;
          const maxSparkles = 15;
          
          function createSparkle() {
            if (sparkleCount >= maxSparkles) return;
            
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle-item';
            sparkle.textContent = emojis[Math.floor(Math.random() * emojis.length)];
            sparkle.style.left = Math.random() * 100 + '%';
            sparkle.style.animationDelay = Math.random() * 2 + 's';
            sparkle.style.animationDuration = (Math.random() * 2 + 3) + 's';
            sparklesContainer.appendChild(sparkle);
            sparkleCount++;
            
            setTimeout(() => {
              if (sparkle.parentNode) {
                sparkle.remove();
                sparkleCount--;
              }
            }, 5000);
          }
          setInterval(createSparkle, 800);
        }
      })();
    </script>
  </body>
</html>
